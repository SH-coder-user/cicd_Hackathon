server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # React SPA: 새로고침 404 방지
  location / {
    try_files $uri $uri/ /index.html;
  }

  # 파일 업로드 크기(원하면 조정)
  client_max_body_size 10M;

  # API 프록시
  location /api/ {
    proxy_pass http://api:8000/;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header Connection "";
    # 업로드 큰 경우 버퍼 관련 옵션을 추가해도 됨
    # client_body_buffer_size 16M;
    # proxy_request_buffering off;
  }
}

